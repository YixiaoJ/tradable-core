/******  Copyright 2016 Tradable ApS; @license MIT; v1.13  ******/
var trEmbJQ=jQuery.noConflict(!0),jsGlobalObject="undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof global?global:this;!function(e,n){"use strict";function t(){function e(e,t){var c,r,a;t.tradingEnabled=!1,o()&&localStorage.setItem("tradingEnabled:"+m,!1);var i=e.replace("#","").split("&");return n(i).each(function(e,n){var t=n.split("="),o=t[0],i=t[1];"access_token"===o?c=i:"endpointURL"===o?r=i:"expires_in"===o&&(a=i)}),c&&r?(t.enableTrading(c,r,a),"osLaunch"===window.name&&window.close(),!0):!1}var t=!1,c=window.opener;if(c&&"osBrokerSignUp"===window.name)window.close();else if(c&&"osLaunch"===window.name){var a=window.location.hash;if(a){try{c.postMessage("replace your location","*"),t=e(a,c.tradableEmbed)}catch(i){t=!1}t||(t=e(a,_))}}else window.location.hash&&-1!==window.location.hash.indexOf("access_token")&&-1!==window.location.hash.indexOf("endpointURL")&&-1!==window.location.hash.indexOf("expires_in")?t=e(window.location.hash,_):_.tradingEnabled&&(l(),t=!0);t||(console.log("Initiating without authentication..."),n(document).ready(function(){r()}))}function o(){var e="test";try{return localStorage.setItem(e,"1"),localStorage.removeItem(e),!0}catch(n){return!1}}function c(e,n){var t=window.screenLeft?window.screenLeft:window.screenX,o=window.screenTop?window.screenTop:window.screenY,c=420,r=500,a=t+window.innerWidth/2-c/2,i=o+window.innerHeight/2-r/2;return window.open(e,n,"toolbar=no, titlebar=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+c+", height="+r+", top="+i+", left="+a)}function r(){n(_.readyCallbacks).each(function(e,n){n()}),_.notifiedCallbacks=!0}function a(){_.tradingEnabled=!1,o()&&localStorage.setItem("tradingEnabled:"+m,!1),n(U).each(function(e,n){n()}),r()}function i(e){n(L).each(function(n,t){t(e)})}function u(){console.log("Notifying account switch"),n(R).each(function(e,n){n()})}function s(e,t){var o=!1;return _.tradingEnabled&&(_.tradingEnabled=!1,o=!0),_.getInstruments().then(function(t){_.availableCategories.splice(0,_.availableCategories.length),_.availableInstruments.splice(0,_.availableInstruments.length),_.availableSymbols.splice(0,_.availableSymbols.length),_.availableCurrencies.splice(0,_.availableCurrencies.length);var c=["100","200","225","spx","h33","nas","u30","e50","f40","d30","e35","i40","z30","s30","uso","uko"];return n(t).each(function(e,t){if(_.availableInstruments.push(t),_.availableSymbols.push(t.symbol),"FOREX"===t.type&&6===t.symbol.length){var o=t.symbol.toLowerCase().substring(0,3),r=t.symbol.toLowerCase().substring(3,6);-1===n.inArray(o,_.availableCurrencies)&&-1===n.inArray(o,c)&&_.availableCurrencies.push(o),-1===n.inArray(r,_.availableCurrencies)&&-1===n.inArray(o,c)&&_.availableCurrencies.push(r)}-1===n.inArray(t.type,_.availableCategories)&&_.availableCategories.push(t.type)}),console.log("Instruments ready"),o&&(_.tradingEnabled=!0,u()),e&&"function"==typeof e?e(_.accounts):this},function(e){return t&&"function"==typeof t?t(e):this})}function l(){console.log("Validating token..."),_.getAccounts().then(function(e){_.enableTrading(_.accessToken,_.authEndpoint)},function(){_.tradingEnabled=!1,o()&&localStorage.setItem("tradingEnabled:"+m,_.tradingEnabled),r()})}function d(e,t){var c=new n.Deferred;console.log("Accounts initialized");var a,i=localStorage.getItem("selectedAccount:"+m),u=_.accounts.length-1;return a=e&&_.accounts.length>t?_.accounts[u].uniqueId:i&&_.accountMap[i]?i:_.accounts[u].uniqueId,_.setSelectedAccount(a,function(){_.tradingEnabled||(_.tradingEnabled=!0,o()&&localStorage.setItem("tradingEnabled:"+m,_.tradingEnabled),r()),c.resolve()},function(e){c.reject(e)}),c}function p(){if(_.tradingEnabled&&!x){x=!0;var e=[];n(_.symbolKeysForAccountUpdates).each(function(t,o){var c=o.substring(0,o.indexOf(":"));-1===n.inArray(c,e)&&e.push(c)}),_.getSnapshot(e).then(function(e){_.lastSnapshot=e,n.each(F,function(n,t){t(e)}),x=!1},function(){x=!1})}}function f(e,n,t){return n||t?e.then(function(e){return"function"==typeof n?n(e):void 0},function(e,n,o){return"function"==typeof t?t(e,n,o):void 0}):e}function g(e){var n,t,o=0;if(0===e.length)return o;for(n=0;n<e.length;n++)t=e.charCodeAt(n),o=(o<<5)-o+t,o&=o;return o}function A(){return-1!=navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)}("undefined"==typeof console||"undefined"==typeof console.log)&&(e.console={log:function(){}});var m,h,b="js-1.13",v=location.href;if("undefined"!=typeof tradableEmbedConfig)m=tradableEmbedConfig.appId,h=tradableEmbedConfig.customOAuthURL,tradableEmbedConfig.redirectURI&&(v=tradableEmbedConfig.redirectURI);else{var T="tradable-embed";0===n("#"+T).length&&(T="tradable-api"),m=n("#"+T).attr("data-app-id"),h=n("#"+T).attr("data-custom-oauth-url");var y=n("#"+T).attr("data-redirect-uri");y&&(v=y)}v=encodeURIComponent(v);var I="api.tradable.com";m>2e5&&(I="api-staging.tradable.com",console.log("Starting in staging mode..."));var O="https://"+I+"/oauth/authorize?client_id="+m+"&scope=trade&response_type=token&redirect_uri="+v,E=h?h:O,P=localStorage.getItem("accessToken:"+m),S=localStorage.getItem("authEndpoint:"+m),k=localStorage.getItem("tradingEnabled:"+m),w=localStorage.getItem("expirationTimeUTC:"+m);!k||S&&P&&w||(k=!1,o()&&localStorage.setItem("tradingEnabled:"+m,k));var R=[],F=[],C=[],U=[],q=[],L=[],x=!1,_={app_id:m,oauth_host:I,auth_loc:E,login_page_loc:E+"&showLogin=true",approval_page_loc:E+"&showApproval=true",broker_signup_loc:"https://"+I+"/brokerSignup?client_id="+m+"&redirect_uri="+v,auth_window:null,authEndpoint:S,accessToken:P,notifiedCallbacks:!1,tradingEnabled:k,expirationTimeUTC:w,readyCallbacks:[],allAccounts:[],accounts:[],accountIdsToExclude:[],accountMap:{},selectedAccount:null,selectedAccountId:null,availableCategories:[],availableInstruments:[],availableSymbols:[],availableCurrencies:[],lastSnapshot:null,symbolKeysForAccountUpdates:[],accountUpdateInterval:null,accountUpdateMillis:700,authenticate:function(e){_.tradingEnabled?l():_.openOAuthPage("AUTHENTICATE",!0,e)},authenticateWithWindow:function(e){_.openOAuthPage("AUTHENTICATE",!1,e)},showLoginPage:function(e){_.openOAuthPage("LOGIN",!0,e)},showLoginPageInWindow:function(e){_.openOAuthPage("LOGIN",!1,e)},showApprovalPage:function(){_.openOAuthPage("APPROVAL",!0)},showApprovalPageInWindow:function(){_.openOAuthPage("APPROVAL",!1)},showBrokerSignUpPage:function(){_.openOAuthPage("BROKER_SIGNUP",!0)},showBrokerSignUpPageInWindow:function(){_.openOAuthPage("BROKER_SIGNUP",!1)},openOAuthPage:function(e,n,t){var o="AUTHENTICATE"===e.toUpperCase()?_.auth_loc:"LOGIN"===e.toUpperCase()?_.login_page_loc:"APPROVAL"===e.toUpperCase()?_.approval_page_loc:"BROKER_SIGNUP"===e.toUpperCase()?_.broker_signup_loc:void 0;if(!o)return void console.error("Choose a correct type: AUTHENTICATE, LOGIN, APPROVAL or BROKER_SIGNUP");if("undefined"!=typeof t&&(o=o+"&broker_id="+t),"undefined"!=typeof n&&n||A())location.href=o;else{var r="BROKER_SIGNUP"===e.toUpperCase()?"osBrokerSignUp":"osLaunch";_.auth_window=c(o,r)}},enableWithAccessToken:function(e,n,t){_.enableTrading(e,n,t,!0)},signOut:function(){o()&&(localStorage.removeItem("accessToken:"+m),localStorage.removeItem("authEndpoint:"+m),localStorage.removeItem("tradingEnabled:"+m),localStorage.removeItem("expirationTimeUTC:"+m)),_.tradingEnabled=!1,r()},onEmbedReady:function(e){_.readyCallbacks.push(e),_.notifiedCallbacks&&e()},onAccountUpdated:function(e){if(e){0===F.length&&(_.accountUpdateInterval=setInterval(p,_.accountUpdateMillis));var t=g(e.toString());-1===n.inArray(t,C)&&(F.push(e),C.push(t))}},setAccountUpdateFrequencyMillis:function(e){e&&e>0?(_.accountUpdateMillis=e,_.accountUpdateInterval&&(clearInterval(_.accountUpdateInterval),_.accountUpdateInterval=setInterval(p,_.accountUpdateMillis))):console.error("Please specify a valid update frequency")},addSymbolToUpdates:function(e,t){if(-1!==e.indexOf(":"))return void console.error("It is not allowed to include a colon ':' in the updateClientId");var o=t+":"+e;-1===n.inArray(o,_.symbolKeysForAccountUpdates)&&-1!==n.inArray(t,_.availableSymbols)&&_.symbolKeysForAccountUpdates.push(o)},removeSymbolFromUpdates:function(e,t){var o=t+":"+e;_.symbolKeysForAccountUpdates=n.grep(_.symbolKeysForAccountUpdates,function(e){return e!=o})},onAccountSwitch:function(e){e&&-1===n.inArray(e,R)&&R.push(e)},onTokenExpired:function(e){e&&-1===n.inArray(e,U)&&U.push(e)},onError:function(e){-1===n.inArray(e,L)&&L.push(e)},onTokenWillExpire:function(e){function t(){var e=_.getRemainingTokenMillis();e&&e>0&&18e5>e&&n(q).each(function(n,t){t(e)})}0===q.length&&setInterval(t,3e5),-1===n.inArray(e,q)&&q.push(e)},getRemainingTokenMillis:function(){return _.expirationTimeUTC||console.log("You need to authenticate before calling this method"),_.expirationTimeUTC-(new Date).getTime()},makeOsRequest:function(e,t,o,c,r,u,s){var l;"user"!==e&&"accounts"!==e?l="https://"+I:void 0!==o&&null!==o&&0===o.length?l=_.authEndpoint:_.accountMap[o]?l=_.accountMap[o].endpointURL:console.info("Please specify a valid accountId or method");var d=n.ajax({type:t,beforeSend:function(e){e.setRequestHeader("Authorization","Bearer "+_.accessToken),e.setRequestHeader("x-tr-embed-sdk",b)},crossDomain:!0,url:o&&o.length>0?l+"/v1/"+e+"/"+o+"/"+c:l+"/v1/"+e+"/"+c,contentType:"application/json; charset=utf-8",data:r?JSON.stringify(r):void 0,dataType:"json"});return d.then(function(){},function(e,n,t){!e.responseJSON||403!==e.responseJSON.httpStatus&&502!==e.responseJSON.httpStatus||(a(),i(e.responseJSON))}),u||s?d.then(function(e){return"function"==typeof u?u(e):void 0},function(e,n,t){return"function"==typeof s?s(e,n,t):void 0}):"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?Promise.resolve(d):d},makeAccountRequest:function(e,n,t,o,c,r){return _.makeOsRequest("accounts",e,n,t,o,c,r)},setSelectedAccount:function(e,n,t){return _.accountMap[e]?(_.lastSnapshot=void 0,_.selectedAccount=_.accountMap[e],_.selectedAccountId=e,console.log("New accountId is set"),s(function(){o()&&localStorage.setItem("selectedAccount:"+m,e),n&&n()},function(e){(502===e.status||403===e.status)&&(_.excludeCurrentAccount(),_.accounts.length>0&&l()),t&&t(e)})):void console.error("Can't set account id to: "+e)},excludeCurrentAccount:function(){var e=_.selectedAccountId,n=_.accounts.indexOf(_.selectedAccount);n>-1&&_.accounts.splice(n,1),delete _.accountMap[e],_.accountIdsToExclude.push(e)},getInstrumentFromSymbol:function(e){if(!e)return null;var t=null;return n(_.availableInstruments).each(function(n,o){return o.symbol.toUpperCase()===e.toUpperCase()?(t=o,!1):void 0}),t},getInstrumentFromBrokerageAccountSymbol:function(e){var t=null;return n(_.availableInstruments).each(function(n,o){return o.brokerageAccountSymbol.toUpperCase()===e.toUpperCase()?(t=o,!1):void 0}),t},getAccountById:function(e){return _.accountMap[e]},getUser:function(e,n){return _.makeOsRequest("user","GET","","",null,e,n)},getAppInfo:function(e,n){return _.makeOsRequest("apps","GET","",_.app_id,null,e,n)},getBrokers:function(e,n){return _.makeOsRequest("brokers","GET","","",null,e,n)},authenticateWithCredentials:function(e,t,o,c,r){var a,i=new n.Deferred,u={appId:_.app_id,brokerId:e,login:t,password:o};return _.makeOsRequest("authenticate","POST","","",u).then(function(e){return a=e,_.enableTrading(e.apiTokenValue,e.apiEndpoint,e.expires)}).then(function(){i.resolve(a)},function(e){i.reject(e)}),f(i,c,r)},createDemoAccount:function(e,t,o){var c,r=new n.Deferred,a={appId:_.app_id,type:e};return _.makeOsRequest("createDemoAccount","POST","","",a).then(function(e){return c=e,_.enableTrading(e.apiTokenValue,e.apiEndpoint,e.expires)}).then(function(){r.resolve(c)},function(e){r.reject(e)}),f(r,t,o)},createForexDemoAccount:function(e,n){return _.createDemoAccount("FOREX",e,n)},createStocksDemoAccount:function(e,n){return _.createDemoAccount("STOCKS",e,n)},refreshAuthentication:function(e,t,o,c){var r=new n.Deferred,a={refreshTokenValue:e};t&&(a={refreshTokenValue:e,appSecret:t});var i;return _.makeOsRequest("refreshAuthentication","POST","","",a).then(function(e){return i=e,_.enableTrading(e.apiTokenValue,e.apiEndpoint,e.expires)}).then(function(){r.resolve(i)},function(e){r.reject(e)}),f(r,o,c)},getAccounts:function(e,t){var o=_.makeAccountRequest("GET","","",null).then(function(e){_.accounts.splice(0,_.accounts.length),_.allAccounts.splice(0,_.allAccounts.length),_.accountMap={},n(e.accounts).each(function(e,n){n.uniqueId&&"NA"!==n.uniqueId&&_.accountIdsToExclude.indexOf(n.uniqueId)<=-1&&(_.accounts.push(n),_.accountMap[n.uniqueId]=n),_.allAccounts.push(n)})});return f(o,e,t)},getCandles:function(e,n,t,o,c,r){return _.getCandlesForAccount(_.selectedAccountId,e,n,t,o,c,r)},getCandlesForAccount:function(e,n,t,o,c,r,a){var i={symbol:n,from:t,to:o,aggregation:c};return _.makeAccountRequest("POST",e,"candles/",i,r,a)},getSnapshot:function(e,n,t){return _.getSnapshotForAccount(_.selectedAccountId,e,n,t)},getSnapshotForAccount:function(e,n,t,o){var c={symbols:n};return _.makeAccountRequest("POST",e,"",c,t,o)},getInstruments:function(e,n){return _.getInstrumentsForAccount(_.selectedAccountId,e,n)},getInstrumentsForAccount:function(e,n,t){return _.makeAccountRequest("GET",e,"instruments/",null,n,t)},getMetrics:function(e,n){return _.getMetricsForAccount(_.selectedAccountId,e,n)},getMetricsForAccount:function(e,n,t){return _.makeAccountRequest("GET",e,"metrics/",null,n,t)},getOrders:function(e,n){return _.getOrdersForAccount(_.selectedAccountId,e,n)},getOrdersForAccount:function(e,n,t){return _.makeAccountRequest("GET",e,"orders/",null,n,t)},placeMarketOrder:function(e,n,t,o,c){return _.placeOrder(e,0,n,t,"MARKET",o,c)},placeMarketOrderForAccount:function(e,n,t,o,c,r){return _.placeOrderForAccount(e,n,0,t,o,"MARKET",c,r)},placeLimitOrder:function(e,n,t,o,c,r){return _.placeOrder(e,n,t,o,"LIMIT",c,r)},placeLimitOrderForAccount:function(e,n,t,o,c,r,a){return _.placeOrderForAccount(e,n,t,o,c,"LIMIT",r,a)},placeStopOrder:function(e,n,t,o,c,r){return _.placeOrder(e,n,t,o,"STOP",c,r)},placeStopOrderForAccount:function(e,n,t,o,c,r,a){return _.placeOrderForAccount(e,n,t,o,c,"STOP",r,a)},placeOrder:function(e,n,t,o,c,r,a){return _.placeOrderForAccount(_.selectedAccountId,e,n,t,o,c,r,a)},placeOrderForAccount:function(e,n,t,o,c,r,a,i){var u={amount:n,price:t,side:o,symbol:c,type:r};return _.makeAccountRequest("POST",e,"orders/",u,a,i)},placeOrderWithProtections:function(e,n,t,o,c,r,a,i,u){return _.placeOrderWithProtectionsForAccount(_.selectedAccountId,e,n,t,o,c,r,a,i,u)},placeOrderWithProtectionsForAccount:function(e,n,t,o,c,r,a,i,u,s){var l={amount:n,price:t,side:o,symbol:c,type:r};return a&&(l.takeProfitDistance=a),i&&(l.stopLossDistance=i),_.makeAccountRequest("POST",e,"orders/",l,u,s)},getPendingOrders:function(e,n){return _.getPendingOrdersForAccount(_.selectedAccountId,e,n)},getPendingOrdersForAccount:function(e,n,t){return _.makeAccountRequest("GET",e,"orders/pending",null,n,t)},getOrderById:function(e,n,t){return _.getOrderByIdForAccount(_.selectedAccountId,e,n,t)},getOrderByIdForAccount:function(e,n,t,o){return _.makeAccountRequest("GET",e,"orders/"+n,null,t,o)},modifyOrderPrice:function(e,n,t,o){return _.modifyOrderPriceForAccount(_.selectedAccountId,e,n,t,o)},modifyOrderPriceForAccount:function(e,n,t,o,c){var r={price:t};return _.makeAccountRequest("PUT",e,"orders/"+n,r,o,c)},cancelOrder:function(e,n,t){return _.cancelOrderForAccount(_.selectedAccountId,e,n,t)},cancelOrderForAccount:function(e,n,t,o){return _.makeAccountRequest("DELETE",e,"orders/"+n,null,t,o)},getPositions:function(e,n){return _.getPositionsForAccount(_.selectedAccountId,e,n)},getPositionsForAccount:function(e,n,t){return _.makeAccountRequest("GET",e,"positions/",null,n,t)},closeAllPositions:function(e,n){return _.closeAllPositionsForAccount(_.selectedAccountId,e,n)},closeAllPositionsForAccount:function(e,n,t){return _.makeAccountRequest("DELETE",e,"positions/",null,n,t)},getOpenPositions:function(e,n){return _.getOpenPositionsForAccount(_.selectedAccountId,e,n)},getOpenPositionsForAccount:function(e,n,t){return _.makeAccountRequest("GET",e,"positions/open",null,n,t)},getPositionById:function(e,n,t){return _.getPositionByIdForAccount(_.selectedAccountId,e,n,t)},getPositionByIdForAccount:function(e,n,t,o){return _.makeAccountRequest("GET",e,"positions/"+n,null,t,o)},reducePositionToAmount:function(e,n,t,o){return _.reducePositionToAmountForAccount(_.selectedAccountId,e,n,t,o)},reducePositionToAmountForAccount:function(e,n,t,o,c){var r={amount:t};return _.makeAccountRequest("PUT",e,"positions/"+n,r,o,c)},closePosition:function(e,n,t){return _.closePositionForAccount(_.selectedAccountId,e,n,t)},closePositionForAccount:function(e,n,t,o){return _.makeAccountRequest("DELETE",e,"positions/"+n,null,t,o)},addOrModifyProtections:function(e,n,t,o,c){return _.addOrModifyProtectionsForAccount(_.selectedAccountId,e,n,t,o,c)},addOrModifyProtectionsForAccount:function(e,n,t,o,c,r){var a={takeprofit:t,stoploss:o};return _.makeAccountRequest("PUT",e,"positions/"+n+"/protections/",a,c,r)},cancelProtections:function(e,n,t){return _.cancelProtectionsForAccount(_.selectedAccountId,e,n,t)},cancelProtectionsForAccount:function(e,n,t,o){return _.makeAccountRequest("DELETE",e,"positions/"+n+"/protections/",null,t,o)},addOrModifyTakeProfit:function(e,n,t,o){return _.makeProtectionRequest("PUT",e,n,"TAKEPROFIT",t,o)},addOrModifyTakeProfitForAccount:function(e,n,t,o,c){return _.makeProtectionRequestForAccount("PUT",e,n,t,"TAKEPROFIT",o,c)},addOrModifyStopLoss:function(e,n,t,o){return _.makeProtectionRequest("PUT",e,n,"STOPLOSS",t,o)},addOrModifyStopLossForAccount:function(e,n,t,o,c){return _.makeProtectionRequestForAccount("PUT",e,n,t,"STOPLOSS",o,c)},cancelTakeProfit:function(e,n,t){return _.makeProtectionRequest("DELETE",e,0,"TAKEPROFIT",n,t)},cancelTakeProfitForAccount:function(e,n,t,o){return _.makeProtectionRequestForAccount("DELETE",e,n,0,"TAKEPROFIT",t,o)},cancelStopLoss:function(e,n,t){return _.makeProtectionRequest("DELETE",e,0,"STOPLOSS",n,t)},cancelStopLossForAccount:function(e,n,t,o){return _.makeProtectionRequestForAccount("DELETE",e,n,0,"STOPLOSS",t,o)},makeProtectionRequest:function(e,n,t,o,c,r){return _.makeProtectionRequestForAccount(e,_.selectedAccountId,n,t,o,c,r)},makeProtectionRequestForAccount:function(e,n,t,o,c,r,a){var i={price:o};return"DELETE"===e&&(i=null),_.makeAccountRequest(e,n,"positions/"+t+"/protections/"+c,i,r,a)},getPrices:function(e,n,t){return _.getPricesForAccount(_.selectedAccountId,e,n,t)},getPricesForAccount:function(e,n,t,o){var c={symbols:n};return _.makeAccountRequest("POST",e,"prices/",c,t,o)},makeCandleRequest:function(e,t,o,c,r){var a={symbols:t};r&&(a=r);var i=n.ajax({type:"POST",crossDomain:!0,url:"https://candles-api.tradable.com/"+e,contentType:"application/json; charset=utf-8",data:JSON.stringify(a),dataType:"json"});if(o||c)return i.then(function(e){return"function"==typeof o?o(e.dailyClose?e.dailyClose:e):void 0},function(e,n,t){return"function"==typeof c?c(e,n,t):void 0});var u=new n.Deferred;return i.then(function(e){return e.dailyClose?u.resolve(e.dailyClose):u.resolve(e)},function(e,n,t){return u.reject(e,n,t)}),"undefined"!=typeof Promise&&-1!==Promise.toString().indexOf("[native code]")?Promise.resolve(u.promise()):u.promise()},getLastDailyClose:function(e,n,t){return _.makeCandleRequest("dailyClose",e,n,t)},enableTrading:function(e,t,c,r){var a=new n.Deferred;console.log("Enabling Trading..."),_.tradingEnabled=!1,_.lastSnapshot=void 0,e&&t&&(_.accessToken=e,_.authEndpoint=t,o()&&(localStorage.setItem("accessToken:"+m,_.accessToken),localStorage.setItem("authEndpoint:"+m,_.authEndpoint),c&&(_.expirationTimeUTC=(new Date).getTime()+1e3*parseInt(c),localStorage.setItem("expirationTimeUTC:"+m,_.expirationTimeUTC))));var i=_.accounts.length;return _.getAccounts().then(function(e){return d(r,i)}).then(function(){a.resolve()},function(e){a.reject(e)}),a}};t(),e.trEmbJQ=trEmbJQ,e.tradableEmbed=_,"function"==typeof require&&"object"==typeof module&&module&&module.exports&&(module.exports=_)}(jsGlobalObject,trEmbJQ);